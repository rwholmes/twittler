<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link type="text/css" href="style.css" rel="stylesheet"/>
  </head>
  <body>
    <div id="container">
      <h1>Twittler</h1>
      <div id="left">
        <div class="row">
          <h3>My Username</h3>
        </div>
        <textarea placeholder="Compose New Tweet..."></textarea>
        <a href="#" id="send-tweet" class="button small">Send Tweet</a>
      </div>
      <div id="right">
        <div class="row">
          <h3>Tweets</h3>
        </div>
        <div class="row button">
          <a href="#" id="tweet-load" class="button">Load Newest Tweets</a>
        </div>
        <div id="tweets">
        </div>
      </div>
    </div>

    <script>
      $(document).ready(function(){
        var $body = $('body'); // creates a variable for the body element
        var $tweetsdiv = $('div#tweets');
        // $body.html(''); // sets the content of body to be empty
        // var index = streams.home.length - 1; // gets the number of tweets to display on homepage

        var loadTweets = function(prevLength, currentLength) {
          var $tweetGroup = $('<div class="tweet-group"></div>'); 
          $tweetGroup.prependTo($tweetsdiv);
          var index = currentLength - 1;  
          while(index >= prevLength){
            var tweet = streams.home[index]; // an individual tweet object
          
            // time code I added
            var timeArray = tweet.created_at.toString().split(' ');
            var date = timeArray.slice(1,3);
            var time = timeArray[4].split(':')[0] + ':' + timeArray[4].split(':')[1] + ':' + timeArray[4].split(':')[2];
          
            var $tweet = $('<div class="tweet"></div>'); // creates a div element for the tweet
            $tweet.text(time + ' @' + tweet.user + ': ' + tweet.message); // Creates the text to inside the div
            $tweet.appendTo($tweetGroup); // adds the div element into the body
            index -= 1;
          }
        };
        loadTweets(0,streams.home.length); // Load the inital tweets when the page is loaded
        $('a#tweet-load').click(function(event) {
          var currentTweets = $('div.tweet').length;
          loadTweets(currentTweets, streams.home.length);
          event.preventDefault();
        });
      });






    </script>
  </body>
</html>
